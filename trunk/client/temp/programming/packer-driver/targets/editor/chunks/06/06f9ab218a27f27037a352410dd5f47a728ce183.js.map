{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/invite/InviteCell.ts"],"names":["_decorator","Label","Sprite","IVirtualGridListItem","TonGameMgr","oops","UtilMgr","ccclass","property","InviteCell","onSelect","console","log","itemIndex","updateSelectionStatus","onUnselect","onDataChanged","data","completeUserName","ret","isSucc","res","ok","UserName","result","first_name","last_name","Name","string","url","TgBotToken","userid","http","get","ShowUserHead","HeadIcon","onDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,K,OAAAA,K;AAE7BC,MAAAA,M,OAAAA,M;;AADDC,MAAAA,oB,iBAAAA,oB;;AAGCC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;4BAGjBS,U,WADZF,OAAO,CAAC,YAAD,C,UAEHC,QAAQ,CAACN,MAAD,C,UAERM,QAAQ,CAACP,KAAD,C,2BAJb,MACaQ,UADb;AAAA;AAAA,wDACqD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAMjD;AACAC,QAAAA,QAAQ,GAAG;AACPC,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAa,KAAKC,SAA9B;AAEA,eAAKC,qBAAL;AACH;;AAEDC,QAAAA,UAAU,GAAG;AACTJ,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAe,KAAKC,SAAhC;AAEA,eAAKC,qBAAL;AACH;;AAEDE,QAAAA,aAAa,GAAG;AACZ,gBAAMC,IAAI,GAAG,KAAKA,IAAlB;;AAEA,cAAIC,gBAAgB,GAAIC,GAAD,IAAqB;AACxC,gBAAIA,GAAG,CAACC,MAAJ,IAAcD,GAAG,CAACE,GAAJ,CAAQC,EAA1B,EACA;AACI,kBAAIC,QAAQ,GAAGJ,GAAG,CAACE,GAAJ,CAAQG,MAAR,CAAeC,UAAf,GAA4BN,GAAG,CAACE,GAAJ,CAAQG,MAAR,CAAeE,SAA1D;AACA,mBAAKC,IAAL,CAAUC,MAAV,GAAmBL,QAAnB;AACH;AACJ,WAND;;AAOA,cAAIM,GAAG,GAAG,iCAAiC;AAAA;AAAA,wCAAWC,UAA5C,GAAyD,mBAAzD,GAA+E,KAAKb,IAAL,CAAUc,MAAnG;AACA;AAAA;AAAA,4BAAKC,IAAL,CAAUC,GAAV,CAAcJ,GAAd,EAAmBX,gBAAnB,EAAqC,EAArC;AAEA;AAAA;AAAA,kCAAQgB,YAAR,CAAqB,KAAKjB,IAAL,CAAUc,MAA/B,EAAuC,KAAKI,QAA5C;AAEA,eAAKrB,qBAAL;AACH;;AAEDA,QAAAA,qBAAqB,GAAG,CAEvB;;AAEDsB,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AA3CgD,O","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\r\nimport {IVirtualGridListItem} from \"../../../resources/libs/virtual_grid_list/interface\";\r\nimport { Sprite } from 'cc';\r\nimport { HttpReturn } from '../../../../extensions/oops-plugin-framework/assets/libs/network/HttpRequest';\r\nimport { TonGameMgr } from '../manager/TonGameManager';\r\nimport { oops } from '../../../../extensions/oops-plugin-framework/assets/core/Oops';\r\nimport { UtilMgr } from '../manager/UtilManager';\r\nimport { Size } from 'cc';\r\nimport { UITransform } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('InviteCell')\r\nexport class InviteCell extends IVirtualGridListItem {\r\n    @property(Sprite)\r\n    HeadIcon: Sprite;\r\n    @property(Label)\r\n    Name: Label;\r\n\r\n    /** 点击触发选择事件 */\r\n    onSelect() {\r\n        console.log('select _' + this.itemIndex);\r\n\r\n        this.updateSelectionStatus();\r\n    }\r\n\r\n    onUnselect() {\r\n        console.log('unselect _' + this.itemIndex);\r\n\r\n        this.updateSelectionStatus();\r\n    }\r\n\r\n    onDataChanged() {\r\n        const data = this.data;\r\n\r\n        var completeUserName = (ret: HttpReturn) => {\r\n            if (ret.isSucc && ret.res.ok)\r\n            {\r\n                let UserName = ret.res.result.first_name + ret.res.result.last_name;\r\n                this.Name.string = UserName;\r\n            }\r\n        }\r\n        let url = \"https://api.telegram.org/bot\" + TonGameMgr.TgBotToken + \"/getChat?chat_id=\" + this.data.userid;\r\n        oops.http.get(url, completeUserName, \"\");\r\n        \r\n        UtilMgr.ShowUserHead(this.data.userid, this.HeadIcon);\r\n\r\n        this.updateSelectionStatus();\r\n    }\r\n\r\n    updateSelectionStatus() {\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n}\r\n\r\n\r\n"]}