{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/framework/Main.ts"],"names":["DynamicAtlasManager","_decorator","macro","profiler","DEBUG","JSB","oops","Root","ecs","UIConfigData","smc","EcsPositionSystem","Initialize","ccclass","property","CLEANUP_IMAGE_CACHE","instance","enabled","maxFrameSize","Main","start","showStats","run","initialize","getEntity","gui","toast","initGui","init","initEcsSystem","add"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,mB,OAAAA,mB;AAAqBC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,Q,OAAAA,Q;;AACxCC,MAAAA,K,UAAAA,K;AAAOC,MAAAA,G,UAAAA,G;;AACPC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,iB,iBAAAA,iB;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBb,U;AAE9BC,MAAAA,KAAK,CAACa,mBAAN,GAA4B,KAA5B;AACAf,MAAAA,mBAAmB,CAACgB,QAApB,CAA6BC,OAA7B,GAAuC,IAAvC;AACAjB,MAAAA,mBAAmB,CAACgB,QAApB,CAA6BE,YAA7B,GAA4C,GAA5C;;sBAGaC,I,WADZN,OAAO,CAAC,MAAD,C,gBAAR,MACaM,IADb;AAAA;AAAA,wBAC+B;AAC3BC,QAAAA,KAAK,GAAG;AACJ,cAAIhB,KAAJ,EAAWD,QAAQ,CAACkB,SAAT;AACd;;AAESC,QAAAA,GAAG,GAAG;AACZ;AAAA;AAAA,0BAAIC,UAAJ,GAAiB;AAAA;AAAA,0BAAIC,SAAJ;AAAA;AAAA,uCAAjB;;AACA,cAAInB,GAAJ,EAAS;AACL;AAAA;AAAA,8BAAKoB,GAAL,CAASC,KAAT,CAAe,YAAf;AACH;AACJ;;AAESC,QAAAA,OAAO,GAAG;AAChB;AAAA;AAAA,4BAAKF,GAAL,CAASG,IAAT;AAAA;AAAA;AACH;;AAE4B,cAAbC,aAAa,GAAG;AAC5B;AAAA;AAAA,4BAAKrB,GAAL,CAASsB,GAAT,CAAa;AAAA;AAAA,uDAAb,EAD4B,CAE5B;AACA;AACA;AACH;;AArB0B,O","sourcesContent":["import { DynamicAtlasManager, _decorator, macro, profiler } from 'cc';\r\nimport { DEBUG, JSB } from 'cc/env';\r\nimport { oops } from '../../../extensions/oops-plugin-framework/assets/core/Oops';\r\nimport { Root } from '../../../extensions/oops-plugin-framework/assets/core/Root';\r\nimport { ecs } from '../../../extensions/oops-plugin-framework/assets/libs/ecs/ECS';\r\nimport { UIConfigData } from './common/config/GameUIConfig';\r\nimport { smc } from './common/ecs/SingletonModuleComp';\r\nimport { EcsPositionSystem } from './common/ecs/position/EcsPositionSystem';\r\nimport { Initialize } from './initialize/Initialize';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\nmacro.CLEANUP_IMAGE_CACHE = false;\r\nDynamicAtlasManager.instance.enabled = true;\r\nDynamicAtlasManager.instance.maxFrameSize = 512;\r\n\r\n@ccclass('Main')\r\nexport class Main extends Root {\r\n    start() {\r\n        if (DEBUG) profiler.showStats();\r\n    }\r\n\r\n    protected run() {\r\n        smc.initialize = ecs.getEntity<Initialize>(Initialize);\r\n        if (JSB) {\r\n            oops.gui.toast(\"热更新后新程序的提示\");\r\n        }\r\n    }\r\n\r\n    protected initGui() {\r\n        oops.gui.init(UIConfigData);\r\n    }\r\n\r\n    protected async initEcsSystem() {\r\n        oops.ecs.add(new EcsPositionSystem())\r\n        // oops.ecs.add(new EcsAccountSystem());\r\n        // oops.ecs.add(new EcsRoleSystem());\r\n        // oops.ecs.add(new EcsInitializeSystem());\r\n    }\r\n}"]}