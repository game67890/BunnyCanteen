{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/manager/TonTimerManager.ts"],"names":["TonTimerManager","Component","Timer","TonGameMgr","OneSecondTimer","TwoSecondTimer","FiveSecondTimer","TenSecondTimer","SixtySecondTimer","update","dt","OnOneSecondUpdate","OnTwoSecondUpdate","OnFiveSecondUpdate","OnTenSecondUpdate","OnSixtySecondUpdate","pad","num","toString","TimeToString","lasttime","hours","Math","floor","minutes","seconds","TonTimerMgr"],"mappings":";;;6GAOaA,e;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,S,OAAAA,S;;AACAC,MAAAA,K,iBAAAA,K;;AAEAC,MAAAA,U,iBAAAA,U;;;;;;;;;AAET;iCACaH,e,GAAN,MAAMA,eAAN,SAA8BC,SAA9B,CAAwC;AAAA;AAAA;AAAA,eACnCG,cADmC,GACX;AAAA;AAAA,8BAAU,CAAV,CADW;AAAA,eAEnCC,cAFmC,GAEX;AAAA;AAAA,8BAAU,CAAV,CAFW;AAAA,eAGnCC,eAHmC,GAGV;AAAA;AAAA,8BAAU,CAAV,CAHU;AAAA,eAInCC,cAJmC,GAIX;AAAA;AAAA,8BAAU,EAAV,CAJW;AAAA,eAKnCC,gBALmC,GAKT;AAAA;AAAA,8BAAU,EAAV,CALS;AAAA;;AAO3CC,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf,cAAI,KAAKN,cAAL,CAAoBK,MAApB,CAA2BC,EAA3B,CAAJ,EAAoC;AAChC;AAAA;AAAA,0CAAWC,iBAAX;AACH;;AAED,cAAI,KAAKN,cAAL,CAAoBI,MAApB,CAA2BC,EAA3B,CAAJ,EAAoC;AAChC;AAAA;AAAA,0CAAWE,iBAAX;AACH;;AAED,cAAI,KAAKN,eAAL,CAAqBG,MAArB,CAA4BC,EAA5B,CAAJ,EAAqC;AACjC;AAAA;AAAA,0CAAWG,kBAAX;AACH;;AAED,cAAI,KAAKN,cAAL,CAAoBE,MAApB,CAA2BC,EAA3B,CAAJ,EAAoC;AAChC;AAAA;AAAA,0CAAWI,iBAAX;AACH;;AAED,cAAI,KAAKN,gBAAL,CAAsBC,MAAtB,CAA6BC,EAA7B,CAAJ,EAAsC;AAClC;AAAA;AAAA,0CAAWK,mBAAX;AACH;AACJ;;AAEOC,QAAAA,GAAG,CAACC,GAAD,EAAc;AACrB,iBAAOA,GAAG,GAAG,EAAN,GAAW,MAAMA,GAAjB,GAAuBA,GAAG,CAACC,QAAJ,EAA9B;AACH,SA/B0C,CAiC3C;;;AACOC,QAAAA,YAAY,CAACC,QAAD,EAA6B;AAC5C,cAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWH,QAAQ,GAAG,IAAtB,CAAZ;AACA,cAAII,OAAO,GAAGF,IAAI,CAACC,KAAL,CAAW,CAACH,QAAQ,GAAIC,KAAK,GAAG,IAArB,IAA8B,EAAzC,CAAd;AACA,cAAII,OAAO,GAAGL,QAAQ,GAAG,EAAzB;AACA,iBAAO,KAAKJ,GAAL,CAASK,KAAT,IAAkB,GAAlB,GAAwB,KAAKL,GAAL,CAASQ,OAAT,CAAxB,GAA4C,GAA5C,GAAkD,KAAKR,GAAL,CAASS,OAAT,CAAzD;AACH;;AAvC0C,O;;6BA0CpCC,W,GAAc,IAAI1B,eAAJ,E","sourcesContent":["\r\nimport { Component, game } from \"cc\";\r\nimport { Timer } from \"../../../../extensions/oops-plugin-framework/assets/core/common/timer/Timer\";\r\n\r\nimport { TonGameMgr } from \"./TonGameManager\";\r\n\r\n/** TonGame 时间管理 */\r\nexport class TonTimerManager extends Component {\r\n    private OneSecondTimer: Timer = new Timer(1);\r\n    private TwoSecondTimer: Timer = new Timer(2);\r\n    private FiveSecondTimer: Timer = new Timer(5);\r\n    private TenSecondTimer: Timer = new Timer(10);\r\n    private SixtySecondTimer: Timer = new Timer(60);\r\n\r\n    update(dt: number) {\r\n        if (this.OneSecondTimer.update(dt)) {\r\n            TonGameMgr.OnOneSecondUpdate();\r\n        }\r\n\r\n        if (this.TwoSecondTimer.update(dt)) {\r\n            TonGameMgr.OnTwoSecondUpdate();\r\n        }\r\n\r\n        if (this.FiveSecondTimer.update(dt)) {\r\n            TonGameMgr.OnFiveSecondUpdate();\r\n        }\r\n\r\n        if (this.TenSecondTimer.update(dt)) {\r\n            TonGameMgr.OnTenSecondUpdate();\r\n        }\r\n\r\n        if (this.SixtySecondTimer.update(dt)) {\r\n            TonGameMgr.OnSixtySecondUpdate();\r\n        }\r\n    }\r\n\r\n    private pad(num: number) {\r\n        return num < 10 ? '0' + num : num.toString();\r\n    }\r\n\r\n    // 倒计时 单位秒\r\n    public TimeToString(lasttime : number) : string {\r\n        let hours = Math.floor(lasttime / 3600);\r\n        let minutes = Math.floor((lasttime - (hours * 3600)) / 60);\r\n        let seconds = lasttime % 60;\r\n        return this.pad(hours) + \":\" + this.pad(minutes) + \":\" + this.pad(seconds);\r\n    }\r\n} \r\n\r\nexport var TonTimerMgr = new TonTimerManager();"]}