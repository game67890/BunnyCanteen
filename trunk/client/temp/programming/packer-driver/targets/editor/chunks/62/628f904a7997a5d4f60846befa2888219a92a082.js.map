{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/rank/RankTabController.ts"],"names":["_decorator","Component","Node","SpriteFrame","Sprite","oops","GameEvent","RankMgr","UtilMgr","ccclass","property","RankTabController","start","tabButtons","forEach","button","index","on","EventType","TOUCH_END","selectTab","PlaySoundEffect","showTab","i","sprite","getComponent","spriteFrame","selectedSprite","normalSprite","curRankType","message","dispatchEvent","SwitchRank","tabs","tab","active"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;;AAC1CC,MAAAA,I,iBAAAA,I;;AAEAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;mCAGjBW,iB,WADZF,OAAO,CAAC,mBAAD,C,UAEHC,QAAQ,CAAC,CAACR,IAAD,CAAD,C,UAGRQ,QAAQ,CAAC,CAACR,IAAD,CAAD,C,UAGRQ,QAAQ,CAACP,WAAD,C,UAGRO,QAAQ,CAACP,WAAD,C,2BAXb,MACaQ,iBADb,SACuCV,SADvC,CACiD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAa7CW,QAAAA,KAAK,GAAG;AACJ,eAAKC,UAAL,CAAgBC,OAAhB,CAAwB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACvCD,YAAAA,MAAM,CAACE,EAAP,CAAUf,IAAI,CAACgB,SAAL,CAAeC,SAAzB,EAAoC,MAAM,KAAKC,SAAL,CAAeJ,KAAf,CAA1C,EAAiE,IAAjE;AACH,WAFD,EADI,CAKJ;;AACA,eAAKI,SAAL,CAAe,CAAf;AACH;;AAEDA,QAAAA,SAAS,CAACJ,KAAD,EAAgB;AACrB;AAAA;AAAA,kCAAQK,eAAR,CAAwB,EAAxB,EADqB,CAErB;;AACA,eAAKC,OAAL,CAAaN,KAAb,EAHqB,CAKrB;;AACA,eAAKH,UAAL,CAAgBC,OAAhB,CAAwB,CAACC,MAAD,EAASQ,CAAT,KAAe;AACnC,kBAAMC,MAAM,GAAGT,MAAM,CAACU,YAAP,CAAoBrB,MAApB,CAAf;;AACA,gBAAIoB,MAAJ,EAAY;AACR;AACAA,cAAAA,MAAM,CAACE,WAAP,GAAqBH,CAAC,KAAKP,KAAN,GAAc,KAAKW,cAAnB,GAAoC,KAAKC,YAA9D;AACH;AACJ,WAND,EANqB,CAcrB;;AACA;AAAA;AAAA,kCAAQC,WAAR,GAAsBb,KAAK,GAAG,CAA9B;AACA;AAAA;AAAA,4BAAKc,OAAL,CAAaC,aAAb,CAA2B;AAAA;AAAA,sCAAUC,UAArC;AACH;;AAEDV,QAAAA,OAAO,CAACN,KAAD,EAAgB;AACnB,eAAKiB,IAAL,CAAUnB,OAAV,CAAkB,CAACoB,GAAD,EAAMX,CAAN,KAAY;AAC1BW,YAAAA,GAAG,CAACC,MAAJ,GAAcZ,CAAC,KAAKP,KAApB;AACH,WAFD;AAGH;;AA7C4C,O;;;;;iBAExB,E;;;;;;;iBAGN,E;;;;;;;iBAGa,I;;;;;;;iBAGE,I","sourcesContent":["import { _decorator, Component, Node, SpriteFrame, Sprite } from 'cc';\r\nimport { oops } from \"../../../../extensions/oops-plugin-framework/assets/core/Oops\";\r\nimport { UIID } from \"../../framework/common/config/GameUIConfig\";\r\nimport { GameEvent } from \"../../framework/common/config/GameEvent\";\r\nimport { RankMgr } from \"./RankManager\";\r\nimport { UtilMgr } from '../manager/UtilManager';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RankTabController')\r\nexport class RankTabController extends Component {\r\n    @property([Node])\r\n    tabButtons: Node[] = [];\r\n\r\n    @property([Node])\r\n    tabs: Node[] = [];\r\n\r\n    @property(SpriteFrame)\r\n    normalSprite: SpriteFrame = null;\r\n\r\n    @property(SpriteFrame)\r\n    selectedSprite: SpriteFrame = null;\r\n\r\n    start() {\r\n        this.tabButtons.forEach((button, index) => {\r\n            button.on(Node.EventType.TOUCH_END, () => this.selectTab(index), this);\r\n        });\r\n\r\n        // 默认选中第一个 tab\r\n        this.selectTab(0);\r\n    }\r\n\r\n    selectTab(index: number) {\r\n        UtilMgr.PlaySoundEffect(25);\r\n        // 1. 显示相应的 tab 内容\r\n        this.showTab(index);\r\n\r\n        // 2. 重置所有按钮的状态\r\n        this.tabButtons.forEach((button, i) => {\r\n            const sprite = button.getComponent(Sprite);\r\n            if (sprite) {\r\n                // 设置为选中或未选中的背景图\r\n                sprite.spriteFrame = i === index ? this.selectedSprite : this.normalSprite;\r\n            }\r\n        });\r\n\r\n        // 3. 更新当前选中的索引\r\n        RankMgr.curRankType = index + 1;\r\n        oops.message.dispatchEvent(GameEvent.SwitchRank);\r\n    }\r\n\r\n    showTab(index: number) {\r\n        this.tabs.forEach((tab, i) => {\r\n            tab.active = (i === index);\r\n        });\r\n    }\r\n}"]}