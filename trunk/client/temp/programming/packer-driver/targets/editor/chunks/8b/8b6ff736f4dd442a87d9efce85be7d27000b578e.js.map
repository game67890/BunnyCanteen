{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/acceleratedbuff/AcceleratedBuffMain.ts"],"names":["_decorator","Component","Label","Sprite","ProgressBar","Button","Animation","oops","UIID","GameEvent","TonGameMgr","AcceleratedBuffMgr","TableAccelerate","TonTimerMgr","PaymentMgr","UtilMgr","ccclass","property","AcceleratedBuffMain","tablerecord","ticktime","animCtrl","update","deltaTime","updateShowTimer","onAdded","params","init","addEvent","TitleName","string","language","getLangByID","FreeTxt","ShareTxt","updateBaseData","RefreshBuffIcon","BuyNum","costnum","toString","onDestroy","removeEvent","message","on","UpdateBaseData","onUpdateData","UpdateCarrotCoin","off","event","args","updateCarrotCoin","CarrotCoinNum","CarrotCoin","CurGain","GetRealCanTingGain","CurGainRate","AcceAddtionGain_1","refreshShowTxt","IsGetFreeBuff","GetFreeBuffTimeStamp","date","timer","getServerDate","lasttime","getHours","getMinutes","getSeconds","Showtxt1","TimeToString","time","FreeButton","interactable","getComponent","grayscale","IsGetShareBuff","GetShareBuffTimeStamp","Showtxt2","ShareButton","acceleratetime","AccelerateTime","LastAccelerateTime","node","active","LastSlider","progress","pad","num","Showtxt3","isAccelerating","AccelerateIcon","defaultClip","getState","name","isPlaying","addNodeAnimation","stop","onCloseBtnClick","PlaySoundEffect","gui","remove","AcceleratedBuffBuyMain","onAddBtnClick","OpenPaymentUI","onFreeBtnClick","SendBuyBuff","onShareBtnClick","share","onBuyBtnClick","toast"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, Sprite, Toggle, ProgressBar } from 'cc';\r\nimport { oops } from '../../../../extensions/oops-plugin-framework/assets/core/Oops';\r\nimport { UIID } from '../../framework/common/config/GameUIConfig';\r\nimport { GameEvent } from '../../framework/common/config/GameEvent';\r\nimport { TonGameMgr } from '../manager/TonGameManager';\r\nimport { AcceleratedBuffMgr } from './AcceleratedBuffManager';\r\nimport { TableAccelerate } from '../../framework/common/table/TableAccelerate';\r\nimport { TonTimerMgr } from '../manager/TonTimerManager';\r\nimport { Button } from 'cc';\r\nimport { Animation } from 'cc';\r\nimport { PaymentMgr } from '../payment/PaymentManager';\r\nimport { UtilMgr } from '../manager/UtilManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AcceleratedBuffMain')\r\nexport class AcceleratedBuffMain extends Component {\r\n    @property(Label)\r\n    TitleName : Label;\r\n    @property(Label)\r\n    CarrotCoinNum : Label;\r\n    @property(Sprite)\r\n    AccelerateIcon : Sprite;\r\n    @property(Label)\r\n    CurGain : Label;            // 当前收益\r\n    @property(Label)\r\n    CurGainRate : Label;        // 当前加速倍率\r\n    @property(Label)\r\n    LastAccelerateTime : Label; // 当前加速buff剩余时间\r\n    @property(ProgressBar)\r\n    LastSlider : ProgressBar; // 当前加速buff剩余时间进度\r\n\r\n    @property(Button)\r\n    FreeButton : Button;  \r\n    @property(Button)\r\n    ShareButton : Button; \r\n    \r\n    @property(Label)\r\n    FreeTxt : Label;  \r\n    @property(Label)\r\n    ShareTxt : Label;  \r\n\r\n    @property(Label)\r\n    Showtxt1 : Label;  \r\n    @property(Label)\r\n    Showtxt2 : Label;  \r\n    @property(Label)\r\n    Showtxt3 : Label;  \r\n\r\n    @property(Label)\r\n    BuyNum : Label;  \r\n\r\n    private tablerecord = new TableAccelerate();\r\n    private ticktime : number = 0;\r\n    private animCtrl:any = {};\r\n\r\n    update(deltaTime: number) {\r\n        this.ticktime = this.ticktime + deltaTime;\r\n        if (this.ticktime < 1) {\r\n            return;\r\n        }\r\n        this.ticktime = 0;\r\n\r\n        this.updateShowTimer();\r\n    }\r\n\r\n    onAdded(params: any): boolean {\r\n        this.init();\r\n        this.addEvent();\r\n        return true;\r\n    }\r\n\r\n    private init() {\r\n        this.TitleName.string = oops.language.getLangByID(\"stringres_181\");\r\n        this.FreeTxt.string = oops.language.getLangByID(\"stringres_182\");\r\n        this.ShareTxt.string = oops.language.getLangByID(\"stringres_194\");\r\n        this.updateBaseData();\r\n        this.RefreshBuffIcon();\r\n        this.tablerecord.init(3);\r\n        this.BuyNum.string = this.tablerecord.costnum.toString();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.removeEvent();\r\n    }\r\n\r\n    /** 添加全局消息事件 */\r\n    private addEvent() {\r\n        oops.message.on(GameEvent.UpdateBaseData, this.onUpdateData, this);\r\n        oops.message.on(GameEvent.UpdateCarrotCoin, this.onUpdateData, this);\r\n    }\r\n\r\n    /** 移除全局消息事件 */\r\n    private removeEvent() {\r\n        oops.message.off(GameEvent.UpdateBaseData, this.onUpdateData, this);\r\n        oops.message.off(GameEvent.UpdateCarrotCoin, this.onUpdateData, this);\r\n    }\r\n\r\n    private onUpdateData(event: string, args: any) {\r\n        switch (event) {\r\n            case GameEvent.UpdateBaseData:\r\n                this.updateBaseData();\r\n                break;\r\n            case GameEvent.UpdateCarrotCoin:\r\n                this.updateCarrotCoin();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private updateBaseData() {\r\n        this.CarrotCoinNum.string = TonGameMgr.CarrotCoin.toString();\r\n        this.CurGain.string = TonGameMgr.GetRealCanTingGain().toString() + \"/s\";\r\n        this.CurGainRate.string = \"+\" + (TonGameMgr.AcceAddtionGain_1*100).toString() + \"%\";\r\n        this.updateShowTimer();\r\n        this.refreshShowTxt();\r\n    }\r\n\r\n    private updateCarrotCoin()\r\n    {\r\n        this.CarrotCoinNum.string = TonGameMgr.CarrotCoin.toString();\r\n    }\r\n\r\n    public updateShowTimer() {\r\n        if (AcceleratedBuffMgr.IsGetFreeBuff) {\r\n            if (AcceleratedBuffMgr.GetFreeBuffTimeStamp > 0) {\r\n                let date = oops.timer.getServerDate();\r\n                let lasttime = 24*60*60-(date.getHours()*60*60+date.getMinutes()*60+date.getSeconds());\r\n                this.Showtxt1.string = TonTimerMgr.TimeToString(lasttime);\r\n                if (lasttime <= 0) {\r\n                    AcceleratedBuffMgr.IsGetFreeBuff = false;\r\n                    AcceleratedBuffMgr.GetFreeBuffTimeStamp = 0;\r\n                    this.tablerecord.init(1);\r\n                    this.Showtxt1.string = (this.tablerecord.time/60).toString()+\"min\";\r\n                    this.FreeButton.interactable = true;\r\n                    this.FreeButton.getComponent(Sprite).grayscale = false\r\n                }\r\n            }\r\n        }\r\n\r\n        if (AcceleratedBuffMgr.IsGetShareBuff) {\r\n            if (AcceleratedBuffMgr.GetShareBuffTimeStamp > 0) {\r\n                let date = oops.timer.getServerDate();\r\n                let lasttime = 24*60*60-(date.getHours()*60*60+date.getMinutes()*60+date.getSeconds());\r\n                this.Showtxt2.string = TonTimerMgr.TimeToString(lasttime);\r\n                if (lasttime <= 0 ) {\r\n                    AcceleratedBuffMgr.IsGetShareBuff = false;\r\n                    AcceleratedBuffMgr.GetShareBuffTimeStamp = 0;\r\n                    this.tablerecord.init(2);\r\n                    this.Showtxt2.string = (this.tablerecord.time/60).toString()+\"min\";\r\n                    this.ShareButton.interactable = true;\r\n                    this.ShareButton.getComponent(Sprite).grayscale = false\r\n                }\r\n            }\r\n        }\r\n\r\n        let acceleratetime = AcceleratedBuffMgr.AccelerateTime;\r\n        if (acceleratetime > 0) {\r\n            this.LastAccelerateTime.node.active = true;\r\n            this.LastAccelerateTime.string = TonTimerMgr.TimeToString(acceleratetime);\r\n            if (acceleratetime < 30*60) {\r\n                this.LastSlider.progress = 2/100;\r\n            } else {\r\n                this.LastSlider.progress = acceleratetime/(24*60*60);\r\n            }\r\n            \r\n        }\r\n        else {\r\n            this.LastAccelerateTime.node.active = false;\r\n            this.LastSlider.progress = 0;\r\n        }\r\n    }\r\n\r\n    pad(num: number) {\r\n        return num < 10 ? '0' + num : num.toString();\r\n    }\r\n\r\n    private refreshShowTxt() {\r\n        if (AcceleratedBuffMgr.IsGetFreeBuff) {\r\n            this.FreeButton.getComponent(Sprite).grayscale = true\r\n            this.FreeButton.interactable = false;\r\n        }\r\n        else {\r\n            this.FreeButton.getComponent(Sprite).grayscale = false\r\n            this.FreeButton.interactable = true;\r\n            this.tablerecord.init(1);\r\n            this.Showtxt1.string = (this.tablerecord.time/60).toString()+\"min\";\r\n        }\r\n\r\n        if (AcceleratedBuffMgr.IsGetShareBuff) {\r\n            this.ShareButton.getComponent(Sprite).grayscale = true\r\n            this.ShareButton.interactable = false;\r\n        }\r\n        else {\r\n            this.ShareButton.getComponent(Sprite).grayscale = false\r\n            this.ShareButton.interactable = true;\r\n            this.tablerecord.init(2);\r\n            this.Showtxt2.string = (this.tablerecord.time/60).toString()+\"min\";\r\n        }\r\n\r\n        this.tablerecord.init(3);\r\n        this.Showtxt3.string = (this.tablerecord.time/60).toString()+\"min\";\r\n    }\r\n\r\n    public RefreshBuffIcon() {\r\n        if (AcceleratedBuffMgr.isAccelerating()) {\r\n            this.animCtrl = this.AccelerateIcon.getComponent(Animation);\r\n            if (!this.animCtrl || !this.animCtrl.defaultClip || !this.animCtrl.getState(this.animCtrl.defaultClip.name) || !this.animCtrl.getState(this.animCtrl.defaultClip.name).isPlaying) {\r\n                UtilMgr.addNodeAnimation(\"animation/jiasu\", this.AccelerateIcon.node, true, true);\r\n            }\r\n        }\r\n        else {\r\n            let animCtrl = this.AccelerateIcon.getComponent(Animation);\r\n            if (animCtrl) {\r\n                animCtrl.stop();\r\n            }\r\n        }\r\n    }\r\n\r\n    public onCloseBtnClick() {\r\n        UtilMgr.PlaySoundEffect(19);\r\n        oops.gui.remove(UIID.AcceleratedBuffBuyMain);\r\n    }\r\n\r\n    public onAddBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        PaymentMgr.OpenPaymentUI();\r\n    }\r\n\r\n    // 点击免费领取按钮\r\n    public onFreeBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        if (AcceleratedBuffMgr.IsGetFreeBuff) {\r\n            return;\r\n        }\r\n\r\n        AcceleratedBuffMgr.SendBuyBuff(1);\r\n    }\r\n\r\n    // 点击分享按钮\r\n    public onShareBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        if (AcceleratedBuffMgr.IsGetShareBuff) {\r\n            return;\r\n        }\r\n\r\n        UtilMgr.share();\r\n        AcceleratedBuffMgr.SendBuyBuff(2);\r\n    }\r\n\r\n    // 点击萝卜币购买按钮\r\n    public onBuyBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        this.tablerecord.init(3); \r\n        if (this.tablerecord.costnum > TonGameMgr.CarrotCoin) {\r\n            oops.gui.toast(\"message_13\", true);     // 萝卜币不足！\r\n            return;\r\n        }\r\n\r\n        AcceleratedBuffMgr.SendBuyBuff(3);\r\n    } \r\n}\r\n"]}