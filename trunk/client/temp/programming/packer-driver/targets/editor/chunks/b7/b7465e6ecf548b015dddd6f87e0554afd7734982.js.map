{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/extensions/oops-plugin-framework/assets/core/gui/prompt/Notify.ts"],"names":["Animation","Component","Label","_decorator","AutoResizeLabelPlugin","DynamicBackgroundPlugin","ccclass","property","Notify","onComplete","onLoad","animation","on","EventType","FINISHED","onFinished","node","destroy","toast","msg","useI18n","autoResizeLabel","lab_content","getComponent","updateLabelContent","string","dynamicBackgroundPlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAMSA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,U,OAAAA,U;;AAE7BC,MAAAA,qB,iBAAAA,qB;;AACAC,MAAAA,uB,iBAAAA,uB;;;;;;AATT;AACA;AACA;AACA;AACA;AACA;;;;;OAMM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAE9B;;wBAEaK,M,WADZF,OAAO,CAAC,QAAD,C,UAEHC,QAAQ,CAACL,KAAD,C,UAGRK,QAAQ,CAACP,SAAD,C,2BALb,MACaQ,MADb,SAC4BP,SAD5B,CACsC;AAAA;AAAA;;AAAA;;AAAA;;AAOlC;AAPkC,eAQlCQ,UARkC,GAQX,IARW;AAAA;;AAUlCC,QAAAA,MAAM,GAAG;AACL,cAAI,KAAKC,SAAT,EACI,KAAKA,SAAL,CAAeC,EAAf,CAAkBZ,SAAS,CAACa,SAAV,CAAoBC,QAAtC,EAAgD,KAAKC,UAArD,EAAiE,IAAjE;AACP;;AAEOA,QAAAA,UAAU,GAAG;AACjB,eAAKC,IAAL,CAAUC,OAAV;AACA,eAAKR,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIS,QAAAA,KAAK,CAACC,GAAD,EAAcC,OAAd,EAAgC;AACjC,cAAIC,eAAe,GAAG,KAAKC,WAAL,CAAiBC,YAAjB;AAAA;AAAA,6DAAtB;;AACA,cAAIF,eAAJ,EACA;AACIA,YAAAA,eAAe,CAACG,kBAAhB,CAAmCL,GAAnC;AACH,WAHD,MAKA;AACI,iBAAKG,WAAL,CAAiBG,MAAjB,GAA0BN,GAA1B;AACH;;AAED,cAAIO,uBAAuB,GAAG,KAAKJ,WAAL,CAAiBC,YAAjB;AAAA;AAAA,iEAA9B;;AACA,cAAIG,uBAAJ,EACA;AACIA,YAAAA,uBAAuB,CAACF,kBAAxB;AACH;AACJ;;AAzCiC,O;;;;;iBAEL,I;;;;;;;iBAGE,I","sourcesContent":["/*\r\n * @Author: dgflash\r\n * @Date: 2022-04-14 17:08:01\r\n * @LastEditors: dgflash\r\n * @LastEditTime: 2022-09-02 14:07:13\r\n */\r\nimport { Animation, Component, Label, _decorator } from \"cc\";\r\nimport { LanguageLabel } from \"../../../libs/gui/language/LanguageLabel\";\r\nimport { AutoResizeLabelPlugin } from \"./AutoResizeLabelPlugin\";\r\nimport { DynamicBackgroundPlugin } from \"./DynamicBackgroundPlugin\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n/** 滚动消息提示组件  */\r\n@ccclass('Notify')\r\nexport class Notify extends Component {\r\n    @property(Label)\r\n    private lab_content: Label = null!;\r\n\r\n    @property(Animation)\r\n    private animation: Animation = null!;\r\n\r\n    /** 提示动画完成 */\r\n    onComplete: Function = null!;\r\n\r\n    onLoad() {\r\n        if (this.animation)\r\n            this.animation.on(Animation.EventType.FINISHED, this.onFinished, this);\r\n    }\r\n\r\n    private onFinished() {\r\n        this.node.destroy();\r\n        this.onComplete && this.onComplete();\r\n    }\r\n\r\n    /**\r\n     * 显示提示\r\n     * @param msg       文本\r\n     * @param useI18n   设置为 true 时，使用多语言功能 msg 参数为多语言 key\r\n     */\r\n    toast(msg: string, useI18n: boolean) {\r\n        let autoResizeLabel = this.lab_content.getComponent(AutoResizeLabelPlugin);\r\n        if (autoResizeLabel)\r\n        {\r\n            autoResizeLabel.updateLabelContent(msg);\r\n        }\r\n        else\r\n        {\r\n            this.lab_content.string = msg;\r\n        }\r\n\r\n        let dynamicBackgroundPlugin = this.lab_content.getComponent(DynamicBackgroundPlugin);\r\n        if (dynamicBackgroundPlugin)\r\n        {\r\n            dynamicBackgroundPlugin.updateLabelContent();\r\n        }\r\n    }\r\n}"]}