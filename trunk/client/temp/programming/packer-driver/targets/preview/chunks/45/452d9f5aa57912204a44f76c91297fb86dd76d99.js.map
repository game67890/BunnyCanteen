{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/rank/RankImageCache.ts"],"names":["_decorator","SpriteFrame","assetManager","Texture2D","ImageCache","ccclass","property","RankImageCache","loadSingleImage","uri","callback","imgMap","loadRemote","err","imageAsset","console","log","spriteFrame","texture","image","_cacheImage","set"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAQA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,W,OAAAA,W;AAAoBC,MAAAA,Y,OAAAA,Y;AAAsBC,MAAAA,S,OAAAA,S;;AACjEC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEF;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV,O,GAAsBN,U;;gCAGfO,c,WADZF,OAAO,CAAC,gBAAD,C,gBAAR,MACaE,cADb;AAAA;AAAA,oCAC+C;AAE9BC,QAAAA,eAAe,CAACC,GAAD,EAAcC,QAAd,EAAkCC,MAAlC,EAA0E;AAAA;;AAAA;AAClG,gBAAIF,GAAJ,EAAS;AACLP,cAAAA,YAAY,CAACU,UAAb,CAAoCH,GAApC,EAAyC,CAACI,GAAD,EAAMC,UAAN,KAAqB;AAC1D,oBAAID,GAAJ,EAAS;AACLE,kBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA;AACH;;AACDD,gBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,oBAAMC,WAAW,GAAG,IAAIhB,WAAJ,EAApB;AACA,oBAAMiB,OAAO,GAAG,IAAIf,SAAJ,EAAhB;AACAe,gBAAAA,OAAO,CAACC,KAAR,GAAgBL,UAAhB;AACAG,gBAAAA,WAAW,CAACC,OAAZ,GAAsBA,OAAtB;;AACA,oBAAI,KAAI,CAACE,WAAT,EAAsB;AAClBT,kBAAAA,MAAM,CAACU,GAAP,CAAWZ,GAAX,EAAgBQ,WAAhB;AACH;;AACD,oBAAIP,QAAJ,EAAc;AACVA,kBAAAA,QAAQ,CAACO,WAAD,EAAcR,GAAd,CAAR;AACH;;AACD,uBAAO,IAAP;AAEH,eAlBD;AAmBA,qBAAO,KAAP;AACH;;AACD,mBAAO,KAAP;AAvBkG;AAwBrG;;AA1B0C,O","sourcesContent":["import {_decorator, Component, SpriteFrame, error, assetManager, Sprite, Texture2D, ImageAsset} from \"cc\";\r\nimport {ImageCache, Texture2DMap} from \"../../../resources/libs/virtual_grid_list/image_cache\";\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n@ccclass('RankImageCache')\r\nexport class RankImageCache extends ImageCache {\r\n\r\n    public async loadSingleImage(uri: string, callback: Function, imgMap: Texture2DMap) :Promise<boolean> {\r\n        if (uri) {\r\n            assetManager.loadRemote<ImageAsset>(uri, (err, imageAsset) => {\r\n                if (err) {\r\n                    console.log(\"loadRemote err\");\r\n                    return;\r\n                }\r\n                console.log(\"loadRemote ok\");\r\n                const spriteFrame = new SpriteFrame();\r\n                const texture = new Texture2D();\r\n                texture.image = imageAsset;\r\n                spriteFrame.texture = texture;\r\n                if (this._cacheImage) {\r\n                    imgMap.set(uri, spriteFrame);\r\n                }\r\n                if (callback) {\r\n                    callback(spriteFrame, uri);\r\n                }\r\n                return true;\r\n     \r\n            });\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n"]}