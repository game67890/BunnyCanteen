{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/extensions/oops-plugin-framework/assets/core/common/loader/ZipLoader.ts"],"names":[],"mappings":"AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA","sourcesContent":["// import { BufferAsset, SpriteFrame, Texture2D } from \"cc\";\r\n// import { oops } from \"../../Oops\";\r\n\r\n// export class ZipLoader {\r\n//     private zips: Map<string, JSZip> = new Map();\r\n\r\n//     /**\r\n//      * 加载ZIP资源包\r\n//      * @param url \r\n//      * @returns \r\n//      */\r\n//     load(url: string): Promise<JSZip> {\r\n//         return new Promise((resolve, reject) => {\r\n//             oops.res.load(url, BufferAsset, async (error: Error | null, asset: BufferAsset) => {\r\n//                 if (error) return reject(error);\r\n\r\n//                 var zip = await JSZip.loadAsync(asset.buffer());\r\n//                 this.zips.set(url, zip);\r\n//                 resolve(zip);\r\n//             })\r\n//         });\r\n//     }\r\n\r\n//     getJson(zipName: string, path: string): Promise<any> {\r\n//         return new Promise(async (resolve, reject) => {\r\n//             var zip = this.zips.get(zipName);\r\n//             if (zip == null) {\r\n//                 console.error(`名为【${zipName}】的资源包不存在`);\r\n//                 resolve(null);\r\n//                 return;\r\n//             }\r\n\r\n//             var file = zip.file(path);\r\n//             var json = JSON.parse(await file.async(\"text\"));\r\n//             resolve(json);\r\n//         });\r\n//     }\r\n\r\n//     getSpriteFrame(zipName: string, path: string): Promise<SpriteFrame> {\r\n//         return new Promise(async (resolve, reject) => {\r\n//             var zip = this.zips.get(zipName);\r\n//             if (zip == null) {\r\n//                 console.error(`名为【${zipName}】的资源包不存在`);\r\n//                 resolve(null!);\r\n//                 return;\r\n//             }\r\n\r\n//             var file = zip.file(path);\r\n//             var buf = await file.async(\"base64\");\r\n//             var img = new Image();\r\n//             img.src = 'data:image/png;base64,' + buf;\r\n//             img.onload = () => {\r\n//                 var texture = new Texture2D();\r\n//                 texture.reset({\r\n//                     width: img.width,\r\n//                     height: img.height\r\n//                 });\r\n//                 texture.uploadData(img, 0, 0);\r\n//                 texture.loaded = true;\r\n\r\n//                 var sf = new SpriteFrame();\r\n//                 sf.texture = texture;\r\n\r\n//                 resolve(sf);\r\n//             }\r\n//         });\r\n//     }\r\n// }"]}