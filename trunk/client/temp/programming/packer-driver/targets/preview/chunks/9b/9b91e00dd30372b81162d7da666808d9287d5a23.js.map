{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/extensions/oops-plugin-framework/assets/core/gui/prompt/AutoResizeLabelPlugin.ts"],"names":["_decorator","Component","Label","UITransform","ccclass","property","AutoResizeLabelPlugin","type","onLoad","updateLabelHeight","label","console","warn","updateRenderData","labelHeight","node","getComponent","height","padding","updateLabelContent","newText","string"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;;;;;;;;;OACjC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;uCAGjBM,qB,WADZF,OAAO,CAAC,uBAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BAFb,MACaI,qBADb,SAC2CL,SAD3C,CACqD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK3B;AAEtBO,QAAAA,MAAM,GAAG;AACL,eAAKC,iBAAL;AACH;AAED;AACJ;AACA;;;AACIA,QAAAA,iBAAiB,GAAG;AAChB,cAAI,CAAC,KAAKC,KAAV,EAAiB;AACbC,YAAAA,OAAO,CAACC,IAAR,CAAa,eAAb;AACA;AACH,WAJe,CAMhB;;;AACA,eAAKF,KAAL,CAAWG,gBAAX,CAA4B,IAA5B,EAPgB,CAShB;;AACA,cAAMC,WAAW,GAAG,KAAKJ,KAAL,CAAWK,IAAX,CAAgBC,YAAhB,CAA6Bb,WAA7B,EAA2Cc,MAA/D,CAVgB,CAYhB;;AACA,eAAKP,KAAL,CAAWK,IAAX,CAAgBC,YAAhB,CAA6Bb,WAA7B,EAA2Cc,MAA3C,GAAoDH,WAAW,GAAG,KAAKI,OAAL,GAAe,CAAjF;AACH;AAED;AACJ;AACA;AACA;;;AACIC,QAAAA,kBAAkB,CAACC,OAAD,EAAkB;AAChC,cAAI,KAAKV,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWW,MAAX,GAAoBD,OAApB;AACA,iBAAKX,iBAAL;AACH;AACJ;;AAvCgD,O;;;;;iBAE3B,I;;kFAErBJ,Q;;;;;iBACiB,E","sourcesContent":["import { _decorator, Component, Label, UITransform } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AutoResizeLabelPlugin')\r\nexport class AutoResizeLabelPlugin extends Component {\r\n    @property({ type: Label })\r\n    label: Label | null = null;\r\n\r\n    @property\r\n    padding: number = 20; // 可选的左右边距\r\n\r\n    onLoad() {\r\n        this.updateLabelHeight();\r\n    }\r\n\r\n    /**\r\n     * 更新Label宽度，使其根据内容适配\r\n     */\r\n    updateLabelHeight() {\r\n        if (!this.label) {\r\n            console.warn(\"请确保Label节点已绑定\");\r\n            return;\r\n        }\r\n\r\n        // 强制更新 Label 的渲染数据\r\n        this.label.updateRenderData(true);\r\n\r\n        // 获取 Label 的实际宽度\r\n        const labelHeight = this.label.node.getComponent(UITransform)!.height;\r\n\r\n        // 设置 Label 节点宽度，加上左右边距\r\n        this.label.node.getComponent(UITransform)!.height = labelHeight + this.padding * 2;\r\n    }\r\n\r\n    /**\r\n     * 更新Label的文本内容，并调整宽度\r\n     * @param newText 新的文本内容\r\n     */\r\n    updateLabelContent(newText: string) {\r\n        if (this.label) {\r\n            this.label.string = newText;\r\n            this.updateLabelHeight();\r\n        }\r\n    }\r\n}\r\n"]}