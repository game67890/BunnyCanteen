{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/payment/PaymentListItem.ts"],"names":["_decorator","Label","Sprite","Node","IVirtualGridListItem","UtilMgr","TablePay","oops","ccclass","property","PaymentListItem","_tsPay","onSelect","console","log","itemIndex","onUnselect","onDataChanged","data","redPoint","node","active","paytype","left","background","grayscale","reward1","reward2","reward3","priceLabel","string","carrotcoin","gift","rewardText1","SetImage","rewardIcon1","rewardText2","rewardIcon2","rewardText3","rewardIcon3","price","language","getLangByID","name","discountdesc1","zhekou1Label","discountdesc2","zhekou2Label","init","ID","imgItem","picture","onDestroy"],"mappings":"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","sourcesContent":["import {_decorator, Label, Sprite, math, SpriteFrame, Node} from 'cc';\r\nimport {IVirtualGridListItem} from \"../../../resources/libs/virtual_grid_list/interface\";\r\nimport { UtilMgr } from \"../manager/UtilManager\";\r\nimport { TablePay } from \"../../framework/common/table/TablePay\";\r\nimport { oops } from \"../../../../extensions/oops-plugin-framework/assets/core/Oops\";\r\n\r\nconst {ccclass, property} = _decorator;\r\n\r\n@ccclass('PaymentListItem')\r\nexport class PaymentListItem extends IVirtualGridListItem {\r\n\r\n    @property(Sprite)\r\n    background: Sprite = null;\r\n\r\n    @property(Sprite)\r\n    imgItem: Sprite = null;\r\n\r\n    @property(Node)\r\n    zhekouDi: Node = null;\r\n\r\n    @property(Node)\r\n    reward1: Node = null;\r\n    @property(Sprite)\r\n    rewardIcon1: Sprite = null;\r\n    @property(Label)\r\n    rewardText1: Label = null;\r\n\r\n    @property(Node)\r\n    reward2: Node = null;\r\n    @property(Sprite)\r\n    rewardIcon2: Sprite = null;\r\n    @property(Label)\r\n    rewardText2: Label = null;\r\n\r\n    @property(Node)\r\n    reward3: Node = null;\r\n    @property(Sprite)\r\n    rewardIcon3: Sprite = null;\r\n    @property(Label)\r\n    rewardText3: Label = null;\r\n\r\n    @property(Label)\r\n    priceLabel: Label = null;\r\n\r\n    @property(Label)\r\n    zhekou1Label: Label = null;\r\n    @property(Label)\r\n    zhekou2Label: Label = null;\r\n\r\n    @property(Sprite)\r\n    redPoint: Sprite = null;\r\n\r\n    private _tsPay = new TablePay();\r\n\r\n    /**\r\n     * 点击触发选择事件\r\n     */\r\n    onSelect() {\r\n        console.log('select _' + this.itemIndex);\r\n    }\r\n\r\n    onUnselect() {\r\n        console.log('unselect _' + this.itemIndex);\r\n    }\r\n\r\n    onDataChanged() {\r\n        const data = this.data;\r\n        this.redPoint.node.active = false;\r\n        //支付类型\r\n        if (data.paytype == 0)\r\n        {//免费\r\n            //this.zhekouDi.active = false;\r\n            this.redPoint.node.active = true;\r\n        }\r\n        else if (data.paytype == 1)\r\n        {//AEON 支付\r\n            //this.zhekouDi.active = true;\r\n        }\r\n        else if (data.paytype == 2)\r\n        {//Telegram 支付\r\n            //this.zhekouDi.active = true;\r\n        }\r\n        //库存数量\r\n        if (data.left > 0)\r\n        {\r\n            this.background.grayscale = false;\r\n        }\r\n        else\r\n        {\r\n            //置灰\r\n            this.background.grayscale = true;\r\n        }\r\n        this.reward1.active = false;\r\n        this.reward2.active = false;\r\n        this.reward3.active = false;\r\n\r\n        this.priceLabel.string = \"\";\r\n        //萝卜币\r\n        if (data.carrotcoin > 0 && data.gift > 0)\r\n        {\r\n            this.reward1.active = true;\r\n            this.reward2.active = true;\r\n            this.reward3.active = false;\r\n\r\n            this.rewardText1.string = data.carrotcoin;\r\n            UtilMgr.SetImage(this.rewardIcon1, \"textures/UI/main/main;luobobi\");\r\n            this.rewardText2.string = data.gift;\r\n            UtilMgr.SetImage(this.rewardIcon2, \"textures/UI/zhifu/zhifu;lihe\");\r\n        }\r\n        else if (data.carrotcoin > 0)\r\n        {\r\n            this.reward1.active = false;\r\n            this.reward2.active = false;\r\n            this.reward3.active = true;\r\n            this.rewardText3.string = data.carrotcoin;\r\n            UtilMgr.SetImage(this.rewardIcon3, \"textures/UI/main/main;luobobi\");\r\n        }\r\n        else if (data.gift > 0)\r\n        {\r\n            this.reward1.active = false;\r\n            this.reward2.active = false;\r\n            this.reward3.active = true;\r\n            this.rewardText3.string = data.gift;\r\n            UtilMgr.SetImage(this.rewardIcon3, \"textures/UI/zhifu/zhifu;lihe\");\r\n        }\r\n\r\n        \r\n        if (data.price > 0)\r\n        {\r\n            this.priceLabel.string = \"$\" + data.price/100;\r\n        }\r\n        else\r\n        {\r\n            this.priceLabel.string = oops.language.getLangByID(data.name);\r\n        }\r\n\r\n        if (data.discountdesc1)\r\n        {\r\n            this.zhekou1Label.string = oops.language.getLangByID(data.discountdesc1);\r\n        }\r\n        if (data.discountdesc2)\r\n        {\r\n            this.zhekou2Label.string = oops.language.getLangByID(data.discountdesc2);\r\n        }\r\n        \r\n        this._tsPay.init(data.ID);\r\n\r\n        UtilMgr.SetImage(this.imgItem, this._tsPay.picture);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n}\r\n"]}