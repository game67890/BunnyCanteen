{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/invite/Inviteactivity.ts"],"names":["InviteawardDataItem","_decorator","Component","Label","oops","UIID","StringUtil","IniviteMgr","TableOtherParameter","VirtualGridList","JsonUtil","TableInvitedUserRank","UtilMgr","ccclass","property","configid","Inviteactivity","_dataList","tablerecord","onAdded","params","TitleName","string","language","getLangByID","ShowTxt1","substitute_1","IniviteNum","ShowTxt_1","ShowTxt_2","ShowTxt_3","init","ShowTxt2","parameter","ShowTxt3","BiaotiLabel","BiaotiLabel_1","ShengjiLabel","JiangliLabel","table","get","TableName","id","Number","item","push","initGridList","updategridList","gridList","refreshItemDisplays","clearList","paddingTop","paddingBottom","spacingX","spacingY","columnNum","useVirtualLayout","cacheImage","registerSelectOneItemEventHandler","_onSelectOneItem","appendItemsToDisplayList","data","console","log","onInviteBtnClick","PlaySoundEffect","share","onCopyBtnClick","gui","toast","copyLinkToClipboard","onCloseBtnClick","remove","InviteAcivity"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\r\nimport { oops } from '../../../../extensions/oops-plugin-framework/assets/core/Oops';\r\nimport { UIID } from '../../framework/common/config/GameUIConfig';\r\nimport { StringUtil } from '../../../../extensions/oops-plugin-framework/assets/core/utils/StringUtil';\r\nimport { IniviteMgr } from './InviteManager';\r\nimport { TableOtherParameter } from '../../framework/common/table/TableOtherParameter';\r\nimport { VirtualGridList } from '../../../resources/libs/virtual_grid_list/virtual_grid_list';\r\nimport { JsonUtil } from '../../../../extensions/oops-plugin-framework/assets/core/utils/JsonUtil';\r\nimport { TableInvitedUserRank } from '../../framework/common/table/TableInvitedUserRank';\r\nimport { UtilMgr } from '../manager/UtilManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\nclass InviteawardDataItem {\r\n    configid : number = 0;\r\n}\r\n\r\n@ccclass('Inviteactivity')\r\nexport class Inviteactivity extends Component {\r\n    @property(Label)\r\n    TitleName: Label;\r\n    @property(Label)\r\n    ShowTxt1: Label;\r\n    @property(Label)\r\n    ShowTxt_1: Label;\r\n    @property(Label)\r\n    ShowTxt_2: Label;\r\n    @property(Label)\r\n    ShowTxt_3: Label;\r\n    @property(Label)\r\n    ShowTxt2: Label;\r\n    @property(Label)\r\n    ShowTxt3: Label;\r\n\r\n    @property(Label)\r\n    BiaotiLabel: Label;\r\n    @property(Label)\r\n    BiaotiLabel_1: Label;\r\n    @property(Label)\r\n    ShengjiLabel: Label;\r\n    @property(Label)\r\n    JiangliLabel: Label;\r\n\r\n    @property(VirtualGridList)\r\n    protected gridList: VirtualGridList = null;\r\n    private _dataList: any[] = [];\r\n    private tablerecord = new TableInvitedUserRank();\r\n\r\n    onAdded(params: any): boolean {\r\n        this.TitleName.string = oops.language.getLangByID(\"stringres_108\");\r\n        this.ShowTxt1.string = StringUtil.substitute_1(oops.language.getLangByID(\"stringres_102\"), IniviteMgr.IniviteNum);\r\n        this.ShowTxt_1.string = oops.language.getLangByID(\"stringres_111\");\r\n        this.ShowTxt_2.string = oops.language.getLangByID(\"stringres_112\");\r\n        this.ShowTxt_3.string = oops.language.getLangByID(\"stringres_113\");\r\n        let tablerecord = new TableOtherParameter();\r\n        tablerecord.init(5);\r\n        this.ShowTxt2.string = StringUtil.substitute_1(oops.language.getLangByID(\"stringres_103\"), tablerecord.parameter);\r\n        this.ShowTxt3.string = oops.language.getLangByID(\"stringres_098\");\r\n\r\n        this.BiaotiLabel.string = oops.language.getLangByID(\"stringres_101\");\r\n        this.BiaotiLabel_1.string = oops.language.getLangByID(\"stringres_104\");\r\n        this.ShengjiLabel.string = oops.language.getLangByID(\"stringres_176\");\r\n        this.JiangliLabel.string = oops.language.getLangByID(\"stringres_177\");\r\n\r\n        var table = JsonUtil.get(TableInvitedUserRank.TableName);\r\n\r\n        if (table) {\r\n            for (let id in table) {\r\n                this.tablerecord.init(Number(id));\r\n                const item: InviteawardDataItem = {\r\n                    configid: Number(id),\r\n                }\r\n                this._dataList.push(item);\r\n            }\r\n        }\r\n        this.initGridList();\r\n        return true;\r\n    }\r\n\r\n    private updategridList() {\r\n        this.gridList.refreshItemDisplays();\r\n    }\r\n\r\n    initGridList() {\r\n        /*  paddingTop: 列表距离上边缘距离 默认为0\r\n        paddingBottom: 列表距离下边缘距离 默认为0\r\n        spacingX: 列间距 默认为3\r\n        spacingY: 行间距 默认为3\r\n        columnNum: 列数 默认为0，自动适配容器宽度\r\n        useVirtualLayout: 是否启用虚拟列表 默认为true\r\n        emptyTip: 没有数据显示提示\r\n        cacheImage: 是否缓存列表中加载过的图片，控件回收后，图片缓存将被全部释放。\r\n     */\r\n        if (this.gridList) {\r\n            this.gridList.clearList();\r\n            this.gridList.initGridList({\r\n                paddingTop: 0,\r\n                paddingBottom: 0,\r\n                spacingX: 0,\r\n                spacingY: 0,\r\n                columnNum: 1,\r\n                useVirtualLayout: true,\r\n                // emptyTip: oops.language.getLangByID(\"stringres_088\"),\r\n                cacheImage: true\r\n            });\r\n            this.gridList.registerSelectOneItemEventHandler(this._onSelectOneItem, this);\r\n\r\n            this.gridList.appendItemsToDisplayList(this._dataList);\r\n        }\r\n    }\r\n\r\n    _onSelectOneItem(data: any) {\r\n        console.log('_onSelectOneItem');\r\n    }\r\n\r\n    // 点击邀请一个朋友按钮\r\n    public onInviteBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        UtilMgr.share();\r\n    }\r\n    // 点击copy按钮\r\n    public onCopyBtnClick() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n        oops.gui.toast(\"message_26\", true);\r\n        UtilMgr.copyLinkToClipboard()\r\n    }\r\n\r\n    public onCloseBtnClick() {\r\n        UtilMgr.PlaySoundEffect(19);\r\n        oops.gui.remove(UIID.InviteAcivity);\r\n    }\r\n}\r\n\r\n\r\n"]}