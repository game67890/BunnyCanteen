{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/pullingcarrots/CarrotRankRewardComponent.ts"],"names":["RankRewardDataItem","_decorator","Component","Label","Vec3","Button","oops","UIID","VirtualGridList","TableRadishAwardRank","UtilMgr","ccclass","property","_temp_vec3","minirank","maxrank","showtxt","CarrotRankRewardComponent","_dataList","tablereward","onAdded","params","TitleName","string","language","getLangByID","i","init","item","minrank","Math","floor","Number","awardpercent","toString","push","initGridList","gridList","clearList","paddingTop","paddingBottom","spacingX","spacingY","columnNum","useVirtualLayout","emptyTip","cacheImage","registerSelectOneItemEventHandler","_onSelectOneItem","appendItemsToDisplayList","data","console","log","onCloseBtnClick","PlaySoundEffect","gui","remove","CarrotRankReward"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, Prefab, instantiate, Vec3, UITransform } from 'cc';\r\nimport { oops } from \"../../../../extensions/oops-plugin-framework/assets/core/Oops\";\r\nimport { UIID } from \"../../framework/common/config/GameUIConfig\";\r\nimport { Button } from 'cc';\r\nimport { VirtualGridList } from \"../../../resources/libs/virtual_grid_list/virtual_grid_list\";\r\nimport { TableRadishAwardRank } from '../../framework/common/table/TableRadishAwardRank';\r\nimport { UtilMgr } from '../manager/UtilManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst _temp_vec3 = new Vec3();\r\n\r\nclass RankRewardDataItem {\r\n    minirank: number = 0;\r\n    maxrank: number = 0;\r\n    showtxt: string = \"\";\r\n}\r\n\r\n@ccclass('CarrotRankRewardComponent')\r\nexport class CarrotRankRewardComponent extends Component {\r\n    @property(Button)\r\n    CloseBtn: Button;\r\n    @property(Label)\r\n    TitleName: Label;\r\n\r\n    @property(VirtualGridList)\r\n    protected gridList: VirtualGridList = null;\r\n\r\n    private _dataList: any[] = [];\r\n    private tablereward = new TableRadishAwardRank();\r\n\r\n    onAdded(params: any): boolean {\r\n        this.TitleName.string = oops.language.getLangByID(\"stringres_030\");\r\n        for (let i = 0; i < 5; ++i) {\r\n            this.tablereward.init(i+1);\r\n            const item: RankRewardDataItem = {\r\n                minirank: this.tablereward.minrank,\r\n                maxrank: this.tablereward.maxrank,\r\n                showtxt: Math.floor(Number(this.tablereward.awardpercent)*100).toString() + \"%\"\r\n            }\r\n            this._dataList.push(item);\r\n        }\r\n        this.initGridList();\r\n        return true;\r\n    }\r\n    initGridList() {\r\n        /*  paddingTop: 列表距离上边缘距离 默认为0\r\n        paddingBottom: 列表距离下边缘距离 默认为0\r\n        spacingX: 列间距 默认为3\r\n        spacingY: 行间距 默认为3\r\n        columnNum: 列数 默认为0，自动适配容器宽度\r\n        useVirtualLayout: 是否启用虚拟列表 默认为true\r\n        emptyTip: 没有数据显示提示\r\n        cacheImage: 是否缓存列表中加载过的图片，控件回收后，图片缓存将被全部释放。\r\n     */\r\n        if (this.gridList) {\r\n            this.gridList.clearList();\r\n            this.gridList.initGridList({\r\n                paddingTop: 0,\r\n                paddingBottom: 10,\r\n                spacingX: 0,\r\n                spacingY: 0,\r\n                columnNum: 1,\r\n                useVirtualLayout: true,\r\n                emptyTip: oops.language.getLangByID(\"stringres_088\"),\r\n                cacheImage: true\r\n            });\r\n            //this.gridList.registerScrollToBottomEventHandler(this._nextPage, this);\r\n            this.gridList.registerSelectOneItemEventHandler(this._onSelectOneItem, this);\r\n\r\n            this.gridList.appendItemsToDisplayList(this._dataList);\r\n        }\r\n    }\r\n\r\n\r\n    _onSelectOneItem(data: any) {\r\n        console.log('_onSelectOneItem');\r\n    }\r\n\r\n    // 点击关闭按钮\r\n    public onCloseBtnClick() {\r\n        UtilMgr.PlaySoundEffect(19);\r\n        oops.gui.remove(UIID.CarrotRankReward);\r\n    }\r\n}\r\n\r\n\r\n"]}