{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/extensions/oops-plugin-framework/assets/core/gui/prompt/DynamicBackgroundPlugin.ts"],"names":["_decorator","Component","Node","Label","UITransform","ccclass","property","DynamicBackgroundPlugin","type","onLoad","updateBackgroundHeight","labelNode","backgroundNode","console","warn","labelComponent","getComponent","updateRenderData","labelHeigth","height","padding","updateLabelContent"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;;;;;+FAF7C;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;yCAGjBO,uB,WADZF,OAAO,CAAC,yBAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,UAGRI,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,2BALb,MACaK,uBADb,SAC6CN,SAD7C,CACuD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAQ7B;AAEtBQ,QAAAA,MAAM,GAAG;AACL,eAAKC,sBAAL;AACH,SAZkD,CAcnD;;;AACAA,QAAAA,sBAAsB,GAAG;AACrB,cAAI,CAAC,KAAKC,SAAN,IAAmB,CAAC,KAAKC,cAA7B,EAA6C;AACzCC,YAAAA,OAAO,CAACC,IAAR,CAAa,0BAAb;AACA;AACH,WAJoB,CAMrB;;;AACA,cAAMC,cAAc,GAAG,KAAKJ,SAAL,CAAeK,YAAf,CAA4Bb,KAA5B,CAAvB;;AACA,cAAI,CAACY,cAAL,EAAqB;AACjBF,YAAAA,OAAO,CAACC,IAAR,CAAa,qBAAb;AACA;AACH,WAXoB,CAarB;;;AACAC,UAAAA,cAAc,CAACE,gBAAf,CAAgC,IAAhC,EAdqB,CAgBrB;;AACA,cAAMC,WAAW,GAAG,KAAKP,SAAL,CAAeK,YAAf,CAA4BZ,WAA5B,EAA0Ce,MAA9D,CAjBqB,CAmBrB;;AACA,eAAKP,cAAL,CAAoBI,YAApB,CAAiCZ,WAAjC,EAA+Ce,MAA/C,GAAwDD,WAAW,GAAG,KAAKE,OAAL,GAAe,CAArF;AACH,SApCkD,CAsCnD;;;AACAC,QAAAA,kBAAkB,GAAG;AACjB,eAAKX,sBAAL;AACH;;AAzCkD,O;;;;;iBAE1B,I;;;;;;;iBAGK,I;;kFAE7BJ,Q;;;;;iBACiB,E","sourcesContent":["// DynamicBackground.ts\r\n\r\nimport { _decorator, Component, Node, Label, UITransform } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DynamicBackgroundPlugin')\r\nexport class DynamicBackgroundPlugin extends Component {\r\n    @property({ type: Node })\r\n    labelNode: Node | null = null;\r\n\r\n    @property({ type: Node })\r\n    backgroundNode: Node | null = null;\r\n\r\n    @property\r\n    padding: number = 20; // 背景两侧的边距\r\n\r\n    onLoad() {\r\n        this.updateBackgroundHeight();\r\n    }\r\n\r\n    // 更新背景宽度的方法\r\n    updateBackgroundHeight() {\r\n        if (!this.labelNode || !this.backgroundNode) {\r\n            console.warn(\"请确保Label和Background节点已绑定\");\r\n            return;\r\n        }\r\n\r\n        // 获取Label组件\r\n        const labelComponent = this.labelNode.getComponent(Label);\r\n        if (!labelComponent) {\r\n            console.warn(\"Label节点上没有找到Label组件\");\r\n            return;\r\n        }\r\n\r\n        // 强制更新 Label 的渲染数据\r\n        labelComponent.updateRenderData(true);\r\n\r\n        // 获取Label的宽度\r\n        const labelHeigth = this.labelNode.getComponent(UITransform)!.height;\r\n\r\n        // 设置背景的宽度，加上左右的边距\r\n        this.backgroundNode.getComponent(UITransform)!.height = labelHeigth + this.padding * 2;\r\n    }\r\n\r\n    // 当Label的内容变化时，可以手动调用此函数\r\n    updateLabelContent() {\r\n        this.updateBackgroundHeight();\r\n    }\r\n}\r\n"]}