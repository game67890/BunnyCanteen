{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/role/RoleComponent.ts"],"names":["_decorator","Component","Sprite","UtilMgr","ccclass","property","RoleComponent","WalkScaleX","Init","roleMood","node","active","SetWalkScaleX","scale","PlayStandAnim","roleId","roleSprite","scale_x","addNodeAnimation","PlayWalkAnim","isback","PlaySitAnim","index","callback","PlaySitIdleAnim"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAgEC,MAAAA,M,OAAAA,M;;AAC5EC,MAAAA,O,iBAAAA,O;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;+BAKjBM,a,WADZF,OAAO,CAAC,eAAD,C,UAGHC,QAAQ,CAACH,MAAD,C,UAGRG,QAAQ,CAACH,MAAD,C,2BANb,MACaI,aADb,SACmCL,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQjCM,UARiC,GAQpB,CARoB;AAAA;;AAQjB;AAEjBC,QAAAA,IAAI,GACX;AACI,eAAKC,QAAL,CAAcC,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;AACH;;AAEMC,QAAAA,aAAa,CAACC,KAAD,EAAe;AAC/B,eAAKN,UAAL,GAAkBM,KAAlB;AACH;;AAEMC,QAAAA,aAAa,CAACC,MAAD,EAAgB;AAChC,eAAKC,UAAL,CAAgBN,IAAhB,CAAqBO,OAArB,GAA+B,CAA/B;AACA;AAAA;AAAA,kCAAQC,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,QAAzD,EAAmE,KAAKC,UAAL,CAAgBN,IAAnF;AACH;;AAEMS,QAAAA,YAAY,CAACJ,MAAD,EAAgBK,MAAhB,EAAwC;AAAA,cAAxBA,MAAwB;AAAxBA,YAAAA,MAAwB,GAAP,KAAO;AAAA;;AACvD,cAAIA,MAAJ,EAAY;AACR,iBAAKJ,UAAL,CAAgBN,IAAhB,CAAqBO,OAArB,GAA+B,CAAC,KAAKV,UAArC;AACH,WAFD,MAEO;AACH,iBAAKS,UAAL,CAAgBN,IAAhB,CAAqBO,OAArB,GAA+B,KAAKV,UAApC;AACH;;AACD;AAAA;AAAA,kCAAQW,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,OAAzD,EAAkE,KAAKC,UAAL,CAAgBN,IAAlF;AACH;;AAEMW,QAAAA,WAAW,CAACN,MAAD,EAAgBO,KAAhB,EAA8BC,QAA9B,EAAmD;AACjE,eAAKP,UAAL,CAAgBN,IAAhB,CAAqBO,OAArB,GAA+B,CAA/B;;AACA,cAAIK,KAAK,IAAI,CAAb,EACA;AACI;AAAA;AAAA,oCAAQJ,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,QAAzD,EAAmE,KAAKC,UAAL,CAAgBN,IAAnF,EAAyF,IAAzF,EAA+F,KAA/F,EAAsGa,QAAtG;AACH,WAHD,MAKA;AACI;AAAA;AAAA,oCAAQL,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,QAAzD,EAAmE,KAAKC,UAAL,CAAgBN,IAAnF,EAAyF,IAAzF,EAA+F,KAA/F,EAAsGa,QAAtG;AACH;AACJ;;AAEMC,QAAAA,eAAe,CAACT,MAAD,EAAgBO,KAAhB,EAA8B;AAChD,eAAKN,UAAL,CAAgBN,IAAhB,CAAqBO,OAArB,GAA+B,CAA/B;;AACA,cAAIK,KAAK,IAAI,CAAb,EACA;AACI;AAAA;AAAA,oCAAQJ,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,QAAzD,EAAmE,KAAKC,UAAL,CAAgBN,IAAnF;AACH,WAHD,MAKA;AACI;AAAA;AAAA,oCAAQQ,gBAAR,CAAyB,uBAAuBH,MAAvB,GAAgC,QAAzD,EAAmE,KAAKC,UAAL,CAAgBN,IAAnF;AACH;AACJ;;AAvDwC,O;;;;;iBAGpB,I;;;;;;;iBAGF,I","sourcesContent":["import { _decorator, Component, Node, Label, Prefab, instantiate, view, UITransform, Sprite, Animation} from 'cc';\r\nimport { UtilMgr } from '../manager/UtilManager';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n\r\n@ccclass('RoleComponent')\r\nexport class RoleComponent extends Component {\r\n\r\n    @property(Sprite)\r\n    roleSprite: Sprite = null;\r\n\r\n    @property(Sprite)\r\n    roleMood: Sprite = null;\r\n\r\n    private WalkScaleX = 1; // 用来设置sprite是否翻转 1为原来的 -1为翻转\r\n\r\n    public Init()\r\n    {\r\n        this.roleMood.node.active = false;\r\n    }\r\n\r\n    public SetWalkScaleX(scale:number) {\r\n        this.WalkScaleX = scale;\r\n    }\r\n\r\n    public PlayStandAnim(roleId:number) {\r\n        this.roleSprite.node.scale_x = 1;\r\n        UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/stand\", this.roleSprite.node);\r\n    }\r\n\r\n    public PlayWalkAnim(roleId:number, isback:boolean = false) {\r\n        if (isback) {\r\n            this.roleSprite.node.scale_x = -this.WalkScaleX;\r\n        } else {\r\n            this.roleSprite.node.scale_x = this.WalkScaleX;\r\n        }\r\n        UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/walk\", this.roleSprite.node);\r\n    }\r\n\r\n    public PlaySitAnim(roleId:number, index:number, callback?: Function) {\r\n        this.roleSprite.node.scale_x = 1;\r\n        if (index == 0)\r\n        {\r\n            UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/sit11\", this.roleSprite.node, true, false, callback);\r\n        }\r\n        else\r\n        {\r\n            UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/sit21\", this.roleSprite.node, true, false, callback);\r\n        }\r\n    }\r\n\r\n    public PlaySitIdleAnim(roleId:number, index:number) {\r\n        this.roleSprite.node.scale_x = 1;\r\n        if (index == 0)\r\n        {\r\n            UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/sit12\", this.roleSprite.node);\r\n        }\r\n        else\r\n        {\r\n            UtilMgr.addNodeAnimation(\"animation/fangke/0\" + roleId + \"/sit22\", this.roleSprite.node);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}