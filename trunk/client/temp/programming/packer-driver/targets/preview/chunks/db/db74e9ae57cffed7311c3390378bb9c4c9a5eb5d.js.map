{"version":3,"sources":["file:///F:/TON-Game/src/trunk/client/assets/scripts/tongame/hecheng/AutoComponent.ts"],"names":["_decorator","Component","Label","oops","GameEvent","UIID","UtilMgr","TonGameMgr","AutoTypeEnum","tips","TableOtherParameter","ProtocolMgr","PaymentMgr","StringUtil","ccclass","property","AutoComponent","tableOtherParameter","onAdded","params","Title","string","language","getLangByID","offText","timeText","AutoText1","AutoText2","AutoText3","AutoText4","init","yuanjia","parameter","xianjia","onBuyAuto","PlaySoundEffect","NeedCarrotCoin","Number","CarrotCoin","tishi","substitute_1","confirm","completeAutocompose","ret","isSucc","res","result","onClose","gui","open","BuyAutoUITips","AutoType","HasBuyAndOpen","message","dispatchEvent","UpdateAutoBtn","sendAutocompose","OpenPaymentUI","remove","BuyAutoUI"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAyBC,MAAAA,K,OAAAA,K;;AACrCC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,Y,iBAAAA,Y;;AACZC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,W,iBAAAA,W;;AAEAC,MAAAA,U,kBAAAA,U;;AACAC,MAAAA,U,kBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;;+BAGjBgB,a,WADZF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACb,KAAD,C,UAERa,QAAQ,CAACb,KAAD,C,UAERa,QAAQ,CAACb,KAAD,C,UAERa,QAAQ,CAACb,KAAD,C,UAERa,QAAQ,CAACb,KAAD,C,UAGRa,QAAQ,CAACb,KAAD,C,UAGRa,QAAQ,CAACb,KAAD,C,UAGRa,QAAQ,CAACb,KAAD,C,WAERa,QAAQ,CAACb,KAAD,C,2BArBb,MACac,aADb,SACmCf,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAuBjCgB,mBAvBiC,GAuBX;AAAA;AAAA,2DAvBW;AAAA;;AAyBzCC,QAAAA,OAAO,CAACC,MAAD,EAAuB;AAC1B;AACA,eAAKC,KAAL,CAAWC,MAAX,GAAoB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAApB;AACA,eAAKC,OAAL,CAAaH,MAAb,GAAsB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAtB;AACA,eAAKE,QAAL,CAAcJ,MAAd,GAAuB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAvB,CAJ0B,CAM1B;;AACA,eAAKG,SAAL,CAAeL,MAAf,GAAwB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAxB,CAP0B,CAQ1B;;AACA,eAAKI,SAAL,CAAeN,MAAf,GAAwB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAxB,CAT0B,CAU1B;;AACA,eAAKK,SAAL,CAAeP,MAAf,GAAwB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAxB,CAX0B,CAY1B;;AACA,eAAKM,SAAL,CAAeR,MAAf,GAAwB;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAxB;AAEA,eAAKN,mBAAL,CAAyBa,IAAzB,CAA8B,CAA9B;AACA,eAAKC,OAAL,CAAaV,MAAb,GAAsB,KAAKJ,mBAAL,CAAyBe,SAA/C;AACA,eAAKf,mBAAL,CAAyBa,IAAzB,CAA8B,CAA9B;AACA,eAAKG,OAAL,CAAaZ,MAAb,GAAsB,KAAKJ,mBAAL,CAAyBe,SAA/C;AACA,iBAAO,IAAP;AACH;;AAEME,QAAAA,SAAS,GAAG;AACf;AAAA;AAAA,kCAAQC,eAAR,CAAwB,EAAxB;AAEA,eAAKlB,mBAAL,CAAyBa,IAAzB,CAA8B,CAA9B;AACA,cAAIM,cAAc,GAAIC,MAAM,CAAC,KAAKpB,mBAAL,CAAyBe,SAA1B,CAA5B;;AACA,cAAI;AAAA;AAAA,wCAAWM,UAAX,IAAyBF,cAA7B,EACA;AACI,gBAAIG,KAAK,GAAG;AAAA;AAAA,0CAAWC,YAAX,CAAwB;AAAA;AAAA,8BAAKlB,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAAxB,EAAoE,KAAKN,mBAAL,CAAyBe,SAA7F,CAAZ;AACA;AAAA;AAAA,8BAAKS,OAAL,CAAa,EAAb,EAAiBF,KAAjB,EAAuB,MAAM;AACzB,kBAAIG,mBAAmB,GAAIC,GAAD,IAAqB;AAC3C,oBAAIA,GAAG,CAACC,MAAJ,IAAcD,GAAG,CAACE,GAAJ,CAAQC,MAA1B,EACA;AAAC;AACG,uBAAKC,OAAL;AACA;AAAA;AAAA,oCAAKC,GAAL,CAASC,IAAT,CAAc;AAAA;AAAA,oCAAKC,aAAnB;AACA;AAAA;AAAA,gDAAWC,QAAX,GAAsB;AAAA;AAAA,oDAAaC,aAAnC;AACA;AAAA;AAAA,oCAAKC,OAAL,CAAaC,aAAb,CAA2B;AAAA;AAAA,8CAAUC,aAArC;AACH;AACJ,eARD;;AASA;AAAA;AAAA,8CAAYC,eAAZ,CAA4Bd,mBAA5B,EAAiD,EAAjD;AAEH,aAZD,EAYG;AAAA;AAAA,8BAAKpB,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAZH,EAY+C;AAAA;AAAA,8BAAKD,QAAL,CAAcC,WAAd,CAA0B,eAA1B,CAZ/C;AAaH,WAhBD,MAkBA;AACI,iBAAKwB,OAAL,GADJ,CAEI;;AACA;AAAA;AAAA,0CAAWU,aAAX;AACH;AACJ;;AAEMV,QAAAA,OAAO,GAAG;AACb;AAAA;AAAA,kCAAQZ,eAAR,CAAwB,EAAxB;AACA;AAAA;AAAA,4BAAKa,GAAL,CAASU,MAAT,CAAgB;AAAA;AAAA,4BAAKC,SAArB;AACH;;AAhFwC,O","sourcesContent":["import { _decorator, Component, Node, Sprite, Label } from 'cc';\r\nimport { oops } from \"../../../../extensions/oops-plugin-framework/assets/core/Oops\";\r\nimport { GameEvent } from \"../../framework/common/config/GameEvent\";\r\nimport { UIID } from \"../../framework/common/config/GameUIConfig\";\r\nimport { UtilMgr } from \"../manager/UtilManager\";\r\nimport { TonGameMgr, AutoTypeEnum } from \"../manager/TonGameManager\";\r\nimport { tips } from \"../../framework/common/prompt/TipsManager\";\r\nimport { TableOtherParameter } from \"../../framework/common/table/TableOtherParameter\";\r\nimport { ProtocolMgr } from \"../manager/ProtocolManager\";\r\nimport { HttpReturn } from \"../../../../extensions/oops-plugin-framework/assets/libs/network/HttpRequest\";\r\nimport { PaymentMgr } from '../payment/PaymentManager';\r\nimport { StringUtil } from \"../../../../extensions/oops-plugin-framework/assets/core/utils/StringUtil\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AutoComponent')\r\nexport class AutoComponent extends Component {\r\n    @property(Label)\r\n    Title: Label;\r\n    @property(Label)\r\n    AutoText1: Label;\r\n    @property(Label)\r\n    AutoText2: Label;\r\n    @property(Label)\r\n    AutoText3: Label;\r\n    @property(Label)\r\n    AutoText4: Label;\r\n\r\n    @property(Label)\r\n    offText: Label;\r\n\r\n    @property(Label)\r\n    timeText: Label;\r\n\r\n    @property(Label)\r\n    yuanjia: Label;\r\n    @property(Label)\r\n    xianjia: Label;\r\n\r\n    private tableOtherParameter = new TableOtherParameter();\r\n\r\n    onAdded(params: any): boolean {\r\n        //自动\r\n        this.Title.string = oops.language.getLangByID(\"stringres_020\");\r\n        this.offText.string = oops.language.getLangByID(\"stringres_151\");\r\n        this.timeText.string = oops.language.getLangByID(\"stringres_150\");\r\n\r\n        //自动合成食材\r\n        this.AutoText1.string = oops.language.getLangByID(\"stringres_011\");\r\n        //自动采购\r\n        this.AutoText2.string = oops.language.getLangByID(\"stringres_012\");\r\n        //自动回收低级食材\r\n        this.AutoText3.string = oops.language.getLangByID(\"stringres_013\");\r\n        //自动打开礼盒\r\n        this.AutoText4.string = oops.language.getLangByID(\"stringres_014\");\r\n\r\n        this.tableOtherParameter.init(7);\r\n        this.yuanjia.string = this.tableOtherParameter.parameter;\r\n        this.tableOtherParameter.init(6);\r\n        this.xianjia.string = this.tableOtherParameter.parameter;\r\n        return true;\r\n    }\r\n\r\n    public onBuyAuto() {\r\n        UtilMgr.PlaySoundEffect(18);\r\n\r\n        this.tableOtherParameter.init(6);\r\n        let NeedCarrotCoin =  Number(this.tableOtherParameter.parameter);\r\n        if (TonGameMgr.CarrotCoin >= NeedCarrotCoin)\r\n        {\r\n            let tishi = StringUtil.substitute_1(oops.language.getLangByID(\"stringres_007\"), this.tableOtherParameter.parameter);\r\n            tips.confirm(\"\", tishi,() => {\r\n                var completeAutocompose = (ret: HttpReturn) => {\r\n                    if (ret.isSucc && ret.res.result)\r\n                    {//购买自动成功\r\n                        this.onClose();\r\n                        oops.gui.open(UIID.BuyAutoUITips);\r\n                        TonGameMgr.AutoType = AutoTypeEnum.HasBuyAndOpen;\r\n                        oops.message.dispatchEvent(GameEvent.UpdateAutoBtn);\r\n                    }\r\n                }\r\n                ProtocolMgr.sendAutocompose(completeAutocompose, \"\");\r\n\r\n            }, oops.language.getLangByID(\"stringres_008\"), oops.language.getLangByID(\"stringres_010\"));\r\n        }\r\n        else\r\n        {\r\n            this.onClose();\r\n            //萝卜币不足，弹支付界面\r\n            PaymentMgr.OpenPaymentUI();\r\n        }\r\n    }\r\n\r\n    public onClose() {\r\n        UtilMgr.PlaySoundEffect(19);\r\n        oops.gui.remove(UIID.BuyAutoUI);\r\n    }\r\n}\r\n\r\n\r\n"]}